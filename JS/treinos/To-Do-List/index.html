<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Afazeres</title>
    <style>
        @import url(https://fonts.googleapis.com/css2?family=Lobster&display=swap);
        @import url(https://fonts.googleapis.com/css2? family= Dancing+Script & display=swap);

        :root {
            --fundo: rgb(12, 3, 44);
            --letra: white;
            --roxo: rgb(46, 13, 122);
            --sombra: rgba(0, 0, 0, 0.582);

            /* Fontes */

            --titulo:'Lobster', cursive;
            --texto:'Dancing Script', cursiva;
        }

        * {
            margin: 0px;
            padding: 0px;
        }

        body {
            background-color: var(--fundo);
            color: var(--letra);
        }

        header {
            width: 100%;
            margin: auto;
            background-color: var(--roxo);
            position: fixed;
        }

        header > h3 {
            text-align: center;
            font-size: 30px;
            padding-top: 10px;
            font-weight: 100;
            font-family: var(--titulo);
        }

        header > input {
            width: 300px;
            height: 30px;
            margin-left: 50%;
            transform: translate(-50%);
            border: none;
            margin-top: 20px;
            margin-bottom: 10px;
            border-radius: 10px;
        }

        /*
            Main
        */

        main {
            padding-top: 150px;
        }

        main > div {
            width: 300px;
            height: auto;
            padding: 10px;
            margin: auto;
            border-radius: 10px;
            background-color: var(--roxo);
            margin-bottom: 20px;
        }

        main > div > h2 {
            text-align: center;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        main > div > p {
            font-size: 20px;
            font-family: var(--texto);
            word-wrap: break-word;
        }

        /*
            Criando nova tarefa
        */
        div#create-more {
            width: 50px;
            height: 50px;
            border-radius: 50%;;
            background-color: rgb(25, 5, 136);
            bottom: 50px;
            right: 10px;
            position: fixed;
        }

        div#sombra {
            width: 100%;
            height: 100%;
            top: 0px;
            background-color: var(--sombra);
            position: fixed;
            display: none;
        }

        section#criar {
            width: 300px;
            height: auto;
            border-radius: 20px;
            top: 20%;
            left: 50%;
            transform: translate(-50%);
            position: absolute;
            padding: 10px;
            background-color: var(--roxo);
            display: none;
        }

        section#criar > p {
            margin-left: 35px;
            margin-top: 20px;
            margin-bottom: 10px;
            font-family: var(--texto);
        }

        section#criar > input#name {
            width: 80%;
            height: 30px;
            border-radius: 20px;
            border: none;
            margin-left: 50%;
            transform: translate(-50%);
        }

        section#criar > input#description {
            width: 80%;
            height: 60px;
            border-radius: 20px;
            border: none;
            margin-left: 50%;
            transform: translate(-50%);
        }

        section#criar > input {
            padding-left: 10px;
            box-shadow: 1px 1px 3px var(--fundo);
        }

        section#criar > button {
            width: 80%;
            height: 30px;
            border-radius: 20px;
            margin-top: 20px;
            border: none;
            margin-left: 50%;
            transform: translate(-50%);
            color: var(--letra);
            background-image: linear-gradient(to right, var(--roxo), var(--fundo), var(--roxo));
        }
    </style>
</head>
<body>
    <header>
        <h3>To do List</h3>
        <input type="text" name="" id="pesquisa">
    </header>
    <main>

    </main>

    <!-- Deixa o fundo do site escuro -->
    <div id="sombra"></div>

    <!-- Cria uma nova tarefa -->
    <section id="criar">
        <p>Nome:</p>
        <input type="text" name="" id="name">
        <p>Descrição:</p>
        <input type="text" name="" id="description">
        <button id="nova-tarefa">Criar</button>
    </section>

    <div id="create-more" onclick="addTarefa()"></div>

    <script>
        let inputp
        let inputh2

        //Abre uma aba para criar uma nova tarefa
        function addTarefa() {
            let sectionCriar = document.getElementById('criar')
            let sombra = document.getElementById('sombra')
            sectionCriar.style.display = 'block'
            sombra.style.display = 'block'
        }

        let btnNovaTarefa = document.getElementById('nova-tarefa')
        let obj = {}
        let salvarlista = []

        btnNovaTarefa.addEventListener('click', function() {
            inputp = document.getElementById('description').value
            inputh2 = document.getElementById('name').value

            if(inputp.length ==  0|| inputh2.length == 0) {
                window.alert('Por Favor, preencha todos os campos.')
            } else {
                criaTarefa(inputp, inputh2)
            }
        })

        function criaTarefa(x, y) {
            let sectionCriar = document.getElementById('criar')
            let sombra = document.getElementById('sombra')
            const main = document.querySelector('main')

            //Vai fazer a aba de criar tarefa sumir
            sectionCriar.style.display = 'none'
            sombra.style.display = 'none'

            //Vai criar uma div
            let novaTarefa = document.createElement('div')
            main.appendChild(novaTarefa)

            //Vai criar um p e um h2 na div com o texto dos inputs
            let h2 = document.createElement('h2')
            let p = document.createElement('p')
            p.innerText = x
            h2.innerText = y
            novaTarefa.appendChild(h2)
            novaTarefa.appendChild(p)

            obj = {
                titulo: y,
                desc: x
            }

            salvarlista.push(obj)

            const tarefasJSON = JSON.stringify(salvarlista);
            localStorage.setItem('tarefas', tarefasJSON);
        }

        function adicionaTarefasSalvas() {
            const tarefas = localStorage.getItem('tarefas');
            const listaDeTarefas = JSON.parse(tarefas);
            let c = 0
            for(let tarefa of listaDeTarefas) {
                criaTarefa(listaDeTarefas[c].desc, listaDeTarefas[c].titulo);
                c++
            }
        }
        adicionaTarefasSalvas();
    </script>
</body>
</html>